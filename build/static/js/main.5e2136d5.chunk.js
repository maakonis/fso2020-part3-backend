(this["webpackJsonpthe-phonebook"]=this["webpackJsonpthe-phonebook"]||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),c=t.n(u),o=t(14),l=t(2);var i=function(e){var n=e.handleFilter,t=e.value;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:t,onChange:n}))};var m=function(e){return r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement("h2",null,"add a new"),r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.name,onChange:e.changeName})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.number,onChange:e.changeNumber})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},s=t(3),d=t.n(s),f="/api/persons",b=function(){return d.a.get(f).then((function(e){return e.data}))},h=function(e){return d.a.post(f,e).then((function(e){return e.data}))},v=function(e){return d.a.delete("".concat(f,"/").concat(e))},E=function(e,n){return d.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))};var p=function(e){var n=e.persons,t=e.setPersons,a=function(e){var a=e.target.value,r=n.find((function(e){return e.name===a})).id;window.confirm("Delete ".concat(e.target.value,"?"))&&v(r).then((function(){return t(n.filter((function(e){return e.id!==r})))})).catch((function(e){return console.log("Entry not in db - already deleted or did not exist",e)}))};return r.a.createElement("div",null,n.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("span",null,e.name," ",e.number," "),r.a.createElement("button",{value:e.name,onClick:a},"delete"))})))},g=function(e){var n=e.message,t=e.isError;return null===n?null:r.a.createElement("div",{className:t?"error":"notification"},n)};var O=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),s=Object(l.a)(c,2),d=s[0],f=s[1],v=Object(a.useState)(""),O=Object(l.a)(v,2),j=O[0],w=O[1],S=Object(a.useState)(""),k=Object(l.a)(S,2),y=k[0],C=k[1],N=Object(a.useState)(null),x=Object(l.a)(N,2),P=x[0],D=x[1],F=Object(a.useState)(!1),J=Object(l.a)(F,2),L=J[0],T=J[1];r.a.useEffect((function(){b().then((function(e){return u(e)}))}),[]);var B=t.filter((function(e){return e.name.toLowerCase().includes(y)}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(g,{message:P,isError:L}),r.a.createElement(i,{value:y,handleFilter:function(e){return C(e.target.value.toLowerCase())}}),r.a.createElement(m,{onSubmit:function(e){e.preventDefault();var n=t.map((function(e){return e.name})).indexOf(d);if(-1===n)h({name:d,number:j}).then((function(e){u(t.concat(e)),D("".concat(e.name," has been added to the phonebook.")),setTimeout((function(){return D(null)}),5e3)})),f(""),w("");else if(window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))){var a=t[n],r=Object(o.a)({},a,{number:j});E(a.id,r).then((function(e){u(t.map((function(n){return n.id!==a.id?n:e}))),D("".concat(e.name,"'s phone number has been updated.")),T(!1),setTimeout((function(){return D(null)}),5e3)})).catch((function(){D("".concat(a.name," has already been deleted from the server.")),T(!0)})),f(""),w("")}},name:d,changeName:function(e){return f(e.target.value)},number:j,changeNumber:function(e){return w(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(p,{persons:B,setPersons:u}))};t(37);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.5e2136d5.chunk.js.map